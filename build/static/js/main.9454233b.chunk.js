(this["webpackJsonptodo-tasks"]=this["webpackJsonptodo-tasks"]||[]).push([[0],{63:function(t,e,n){t.exports=n(79)},68:function(t,e,n){},77:function(t,e,n){t.exports=n.p+"static/media/logo.5d5d9eef.svg"},78:function(t,e,n){},79:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(6),i=n.n(o),c=(n(68),n(14)),s=n(15),u=n(17),d=n(16),l=n(11),p=n(9),f=Object(p.a)(Object(p.a)({},{draggableId:"0",type:"TYPE",reason:"DROP",source:{droppableId:"To-Do",index:0}}),{},{destination:{droppableId:"0",index:1}}),m=(Object(p.a)(Object(p.a)({},f),{},{reason:"DROP"}),n(28)),h=n(12),b=Object(a.createContext)(),k=n(55),v=n.n(k),g=n(113),j=n(108);function O(){var t=Object(l.a)(["\n  padding: 8px;\n  margin-bottom: 8px;\n  border: 1px solid lightgrey;\n  border-radius: 2px;\n  display: flex;\n  &:hover {\n    background: #9c27b0;\n    color: white;\n    cursor: pointer;\n  }\n  &:active {\n    background: #9c27b0;\n    color: white;\n  }\n"]);return O=function(){return t},t}var x=h.a.div(O()),y=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){return Object(c.a)(this,n),e.call(this,t)}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(m.b,{index:this.props.index,draggableId:this.props.task.id.toString()},(function(e,n){return r.a.createElement(x,Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef,onClick:function(){return t.context.editTask(t.props.task.id)}}),r.a.createElement(j.a,{item:!0,xs:10},t.props.task.description),r.a.createElement(j.a,{item:!0,xs:2},r.a.createElement(g.a,{color:"secondary"},r.a.createElement(v.a,{onClick:function(e){return t.context.deleteTask(t.props.task.id,e)}}))))}))}}]),n}(r.a.Component);function E(){var t=Object(l.a)(["\n  padding: 8px;\n  flex-grow: 1;\n"]);return E=function(){return t},t}function T(){var t=Object(l.a)(['\n  padding: 8px;\n  text-align: "center";\n']);return T=function(){return t},t}function D(){var t=Object(l.a)(["\n  margin: 8px;\n  border: 1px solid lightgrey;\n  border-radius: 2px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  /* background: 'white'; */\n"]);return D=function(){return t},t}y.contextType=b;var I=h.a.div(D()),w=h.a.h3(T()),C=h.a.div(E()),S=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(I,null,r.a.createElement(w,null,this.props.column.title),r.a.createElement(m.c,{droppableId:this.props.column.id},(function(e){return r.a.createElement(C,Object.assign({ref:e.innerRef},e.droppableProps),t.props.tasks.map((function(t,e){return r.a.createElement(y,{key:Math.random().toString(),index:e,task:t})})),e.placeholder)})))}}]),n}(r.a.Component);function P(){var t=Object(l.a)(["\n  display: flex;\n  width: 100%;\n"]);return P=function(){return t},t}var J=h.a.div(P()),R=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this.context.state.taskDetail;return r.a.createElement(m.a,{onDragEnd:this.context.onDragEnd,onDragUpdate:this.context.onDragUpdate},r.a.createElement(J,null,t.columnsort.map((function(e){var n=t.columns[e],a=n.taskIds.map((function(e){return t.tasks[e]}));return r.a.createElement(S,{key:n.id,column:n,tasks:a})}))))}}]),n}(r.a.Component);R.contextType=b;var A=n(112),N={tasks:{},columns:{"To-Do":{id:"To-Do",title:"To-Do",taskIds:[]},"In-Progress":{id:"In-Progress",title:"In-Progress",taskIds:[]},Completed:{id:"Completed",title:"Completed",taskIds:[]}},columnsort:["To-Do","In-Progress","Completed"]};function W(){var t=Object(l.a)(["\n  font-size: 20px;\n  color: #931078;\n"]);return W=function(){return t},t}function z(){var t=Object(l.a)(["\n  padding: 8px;\n  margin-bottom: 8px;\n  width: 800px;\n  display: flex;\n"]);return z=function(){return t},t}var B=h.a.div(z()),L=h.a.div(W()),M=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this,e=this.context.state,n=e.description;e.error;return r.a.createElement("form",{onSubmit:function(e){return t.context.addTask(e)}},r.a.createElement(B,null,r.a.createElement(j.a,{container:!0},r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement(L,null," Create Task ")),r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement(A.a,{id:"description",error:this.context.state.error.description,label:"Task Description",name:"description",multiline:!1,value:n,helperText:this.context.state.error.message,fullWidth:!0,rows:"1",onChange:function(e){return t.context.handleChange(e)}})))))}}]),n}(r.a.Component);M.contextType=b;n(77),n(78);var U=n(56),_=n.n(U),H=n(27),Y=n(37);function $(){var t=Object(l.a)(["\n  font-size: 20px;\n  color: #931078;\n"]);return $=function(){return t},t}function q(){var t=Object(l.a)(["\n  padding: 8px;\n  margin-bottom: 8px;\n  width: 800px;\n  display: flex;\n"]);return q=function(){return t},t}var F=h.a.div(q()),G=h.a.div($()),K=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t=this,e=this.context.state,n=e.description;e.error;return r.a.createElement("form",{onSubmit:function(e){return t.context.updateTask(e)}},r.a.createElement(F,null,r.a.createElement(j.a,{container:!0},r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement(G,null," Update Task ")),r.a.createElement(j.a,{item:!0,xs:12},r.a.createElement(A.a,{id:"description",error:this.context.state.error.description,label:"Task Description",name:"description",multiline:!1,value:n,helperText:this.context.state.error.message,rows:"1",fullWidth:!0,onChange:function(e){return t.context.handleChange(e)}})))))}}]),n}(r.a.Component);K.contextType=b;var Q=function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e)return n},V=function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&parseInt(n)===parseInt(e))return t[n]},X=["To-Do","In-Progress","Completed"],Z=function(t){for(var e=document.getElementsByTagName("meta"),n=0;n<e.length;n++)if(e[n].getAttribute("name")==t)return e[n].getAttribute("content");return""},tt=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={taskDetail:N,description:"",status:Q(X,"To-Do"),error:{},isLoading:!1,newRecord:!0,id:""},t.createTaskObject=function(e){var n=e.id.toString(),a=t.state.taskDetail;return a.tasks[n]=e,-1==a.columns[V(X,e.status)].taskIds.findIndex((function(t){return t==e.id}))&&a.columns[V(X,e.status)].taskIds.push(e.id),a},t.fetchTodos=function(){fetch("/todos").then((function(t){return t.json()})).then((function(e){var n;e.map((function(e,a){n=t.createTaskObject(e)})),t.setState(Object(p.a)(Object(p.a)({},n),{},{isLoading:!0}))}))},t.addTask=function(e){e.preventDefault();try{var n={todo:{description:t.state.description,status:t.state.status},authenticity_token:Z("csrf-token")};fetch("/todos",{method:"post",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){if(console.log(t),!t.ok)throw t;return t.json()})).then((function(e){var n=t.createTaskObject(e);t.setState({description:"",status:Q(X,"To-Do"),taskDetail:n,error:{}})})).catch((function(e){var n={message:""};e.text().then((function(e){Object.entries(JSON.parse(e)).forEach((function(t){var e=Object(Y.a)(t,2),a=e[0],r=e[1];n[a]=!0,""===n.message&&(n.message=r[0])})),t.setState({error:n})}))}))}catch(a){}},t.editTask=function(e){fetch("/todos/".concat(e)).then((function(t){return t.json()})).then((function(n){t.setState({description:n.description,id:e,newRecord:!1})}))},t.updateTask=function(e){e.preventDefault();var n={todo:{description:t.state.description},authenticity_token:Z("csrf-token")};fetch("/todos/".concat(t.state.id),{method:"put",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw t;return t.json()})).then((function(e){var n=t.createTaskObject(e);t.setState({description:"",status:Q(X,"To-Do"),taskDetail:n,newRecord:!0,error:{}})})).catch((function(e){var n={message:""};e.text().then((function(e){Object.entries(JSON.parse(e)).forEach((function(t){var e=Object(Y.a)(t,2),a=e[0],r=e[1];n[a]=!0,""==n.message&&(n.message=r[0])})),t.setState({error:n})}))}))},t.deleteTask=function(e,n){n.stopPropagation(),fetch("/todos/".concat(e),{method:"delete"}).then((function(n){var a,r=t.state.taskDetail,o=r.tasks[e].status;a=r.columns[V(X,o)].taskIds.filter((function(t){return t!=e})),delete r.tasks[e],r.columns[V(X,o)].taskIds=a,t.setState(Object(p.a)({},r))}))},t.handleChange=function(e){t.setState(Object(H.a)({},e.target.name,e.target.value))},t.onDragEnd=function(e){var n,a=e.destination,r=e.source,o=e.draggableId;if(a&&(a.droppableId!==r.droppableId||a.index!==r.index)){var i=t.state.taskDetail.columns[r.droppableId],c=t.state.taskDetail.columns[a.droppableId];if(i!==c){var s=Array.from(i.taskIds);s.splice(r.index,1);var u=Object(p.a)(Object(p.a)({},i),{},{taskIds:s}),d=Array.from(c.taskIds);d.splice(a.index,0,o);var l=Object(p.a)(Object(p.a)({},c),{},{taskIds:d}),f=Object(p.a)(Object(p.a)({},t.state.taskDetail),{},{columns:Object(p.a)(Object(p.a)({},t.state.taskDetail.columns),{},(n={},Object(H.a)(n,u.id,u),Object(H.a)(n,l.id,l),n))});f.tasks[o].status=Q(X,a.droppableId);try{var m={todo:{status:Q(X,a.droppableId)},authenticity_token:Z("csrf-token")};fetch("/todos/".concat(o),{method:"put",body:JSON.stringify(m),headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw t;return t.json()})).then((function(e){t.setState({taskDetail:f})})).catch((function(e){var n={message:""};e.text().then((function(e){Object.entries(JSON.parse(e)).forEach((function(t){var e=Object(Y.a)(t,2),a=e[0],r=e[1];n[a]=!0,""==n.message&&(n.message=r[0])})),t.setState({error:n})}))}))}catch(v){}}else{var h=Array.from(i.taskIds);h.splice(r.index,1),h.splice(a.index,0,o);var b=Object(p.a)(Object(p.a)({},i),{},{taskIds:h}),k=Object(p.a)(Object(p.a)({},t.state.taskDetail),{},{columns:Object(p.a)(Object(p.a)({},t.state.taskDetail.columns),{},Object(H.a)({},b.id,b))});t.setState({taskDetail:k})}}},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.fetchTodos()}},{key:"render",value:function(){var t=this.state,e=t.isLoading,n=t.id,a=t.newRecord,o=t.error;return console.log(o),e?r.a.createElement(b.Provider,{value:{state:this.state,addTask:this.addTask,handleChange:this.handleChange,onDragEnd:this.onDragEnd,editTask:this.editTask,updateTask:this.updateTask,deleteTask:this.deleteTask}},!0===a?r.a.createElement(M,null):r.a.createElement(K,{id:n}),r.a.createElement(R,null)):r.a.createElement("div",null)}}]),n}(r.a.Component);function et(){var t=Object(l.a)(["\n  padding: 15px 0px;\n  color: white;\n  font-size: 24px;\n  background: #931078;\n  width: 100%;\n"]);return et=function(){return t},t}_.a[900];var nt=h.a.div(et());var at=function(){return r.a.createElement("div",null,r.a.createElement(j.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(nt,null,"To-Do Tasks")),r.a.createElement(j.a,{container:!0,justify:"center"},r.a.createElement(tt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(at,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[63,1,2]]]);
//# sourceMappingURL=main.9454233b.chunk.js.map